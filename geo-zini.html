<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Geo-Zini Country Guesser 2025 | Zinvana</title>
    <meta
      name="description"
      content="Play the Geo-Zini country guessing game. Answer yes or no like Akinator and let our genie deduce the country you are thinking of from the full world database."
    />
    <meta name="author" content="Zinvana" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://zinvana.com/geo-zini.html" />
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <meta name="theme-color" content="#0f172a" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Geo-Zini Country Guesser",
        "applicationCategory": "GameApplication",
        "operatingSystem": "Any",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "description": "A free online country guessing game that uses entropy-based logic to deduce which country you are thinking of.",
        "author": {
          "@type": "Organization",
          "name": "Zinvana"
        }
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "How many questions does it take to guess a country?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Typically, Geo-Zini can zero in on your country within 15-20 questions, thanks to its entropy-based questioning strategy."
            }
          },
          {
            "@type": "Question",
            "name": "Is Geo-Zini free to play?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes, Geo-Zini is 100% free and requires no registration or download."
            }
          },
          {
            "@type": "Question",
            "name": "How many countries are included?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "The database includes all 193 UN member states plus major territories and observers, totaling over 240 entities."
            }
          },
          {
            "@type": "Question",
            "name": "Can I play offline?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Once the page loads, the game logic runs entirely in your browser, so you can keep playing even if you lose connection."
            }
          }
        ]
      }
    </script>
    <style>
      :root {
        --brand1: #4f46e5;
        --brand2: #7c3aed;
        --brand3: #f59e0b;
        --surface: #ffffff;
        --surface-alt: rgba(255, 255, 255, 0.85);
        --text-strong: #1f2937;
        --text: #4a5568;
        --muted: #94a3b8;
        --border: rgba(255, 255, 255, 0.35);
        --stage: rgba(15, 17, 43, 0.9);
        --stage-border: rgba(255, 255, 255, 0.1);
        --card-border: rgba(99, 102, 241, 0.18);
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      html {
        width: 100%;
        overflow-x: hidden;
      }

      body {
        margin: 0;
        font-family: "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
        background: radial-gradient(
            circle at 20% 10%,
            rgba(79, 70, 229, 0.12),
            transparent 45%
          ),
          radial-gradient(
            circle at 80% 0%,
            rgba(124, 58, 237, 0.1),
            transparent 40%
          ),
          linear-gradient(180deg, #f8fafc 0%, #eef2ff 40%, #ffffff 100%);
        color: var(--text);
        min-height: 100vh;
        line-height: 1.5;
        -webkit-font-smoothing: antialiased;
        scroll-behavior: smooth;
        position: relative;
        overflow-x: hidden;
      }

      img,
      svg,
      picture {
        max-width: 100%;
        height: auto;
      }

      .full-width-block {
        width: min(100%, 1200px);
        margin: 0 auto;
      }

      body::before {
        content: "";
        position: fixed;
        inset: 0;
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(2px);
        z-index: -1;
      }

      .skip-link {
        position: absolute;
        top: 12px;
        left: 12px;
        padding: 10px 14px;
        border-radius: 999px;
        background: #0f172a;
        color: #ffffff;
        text-decoration: none;
        font-weight: 700;
        z-index: 11000;
        transform: translateY(-140%);
        transition: transform 0.2s ease;
      }

      .skip-link:focus {
        transform: translateY(0);
      }

      /* Professional Navigation - Enhanced & OPTIMIZED */
      nav {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(30px) saturate(180%);
        -webkit-backdrop-filter: blur(30px) saturate(180%);
        border-bottom: 1px solid rgba(226, 232, 240, 0.8);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08),
          0 1px 3px rgba(0, 0, 0, 0.02);
        padding: 0 5%;
        min-height: 85px;
        z-index: 10000;
        transition: transform 0.3s ease, box-shadow 0.3s ease,
          min-height 0.3s ease;
        will-change: transform;
        contain: layout style;
      }

      /* Enhanced scrolled state */
      nav.scrolled {
        box-shadow: 0 8px 40px rgba(0, 0, 0, 0.12),
          0 1px 3px rgba(0, 0, 0, 0.03);
        background: rgba(255, 255, 255, 0.98);
        min-height: 78px;
        backdrop-filter: blur(40px) saturate(200%);
      }

      /* Navigation layout */
      .nav-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        margin: 0 auto;
        max-width: 1400px;
        gap: 16px;
        flex-wrap: nowrap;
      }

      .nav-left {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .brand-link {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        text-decoration: none;
        color: #0f172a;
        font-weight: 700;
        font-size: 1.05rem;
        letter-spacing: -0.02em;
      }

      .brand-link span {
        white-space: nowrap;
      }

      /* Simple logo styling */
      nav img#brand-logo {
        width: 45px;
        height: 45px;
        border-radius: 8px;
        transition: transform 0.2s ease;
        object-fit: cover;
      }

      nav img#brand-logo:hover {
        transform: scale(1.05);
      }

      /* Navigation links container */
      nav .nav-right {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      nav .nav-center {
        display: flex;
        align-items: center;
        gap: 8px;
        flex: 1;
        justify-content: center;
      }

      /* Professional navigation links - Enhanced */
      nav a {
        color: #475569;
        font-weight: 600;
        font-size: 0.98rem;
        padding: 14px 24px;
        border-radius: 16px;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        background: transparent;
        position: relative;
        overflow: hidden;
        text-transform: capitalize;
        letter-spacing: -0.01em;
      }

      nav a::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 100%;
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #f093fb 100%
        );
        transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        border-radius: 16px;
      }

      nav a:hover {
        color: #ffffff;
        background: transparent;
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.25);
      }

      nav a:hover::before {
        width: 100%;
      }

      /* Enhanced active state */
      nav a.active {
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #f093fb 100%
        );
        color: #ffffff;
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        transform: translateY(-2px);
      }

      /* Simple hamburger menu */
      .nav-toggle {
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 40px;
        height: 40px;
        cursor: pointer;
        border-radius: 6px;
        background: #f8fafc;
        transition: background 0.2s ease;
        border: 1px solid #e2e8f0;
      }

      .nav-toggle:hover {
        background: #f1f5f9;
      }

      .nav-toggle span {
        display: block;
        width: 22px;
        height: 2px;
        background: #475569;
        margin: 2px 0;
        border-radius: 1px;
        transition: all 0.2s ease;
      }

      /* Hamburger animation */
      .nav-toggle.active span:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
      }

      .nav-toggle.active span:nth-child(2) {
        opacity: 0;
      }

      .nav-toggle.active span:nth-child(3) {
        transform: rotate(-45deg) translate(5px, -5px);
      }

      /* Mobile menu - hidden by default */
      .nav-mobile {
        display: none;
      }

      /* Responsive navigation */
      @media (max-width: 1200px) {
        nav {
          padding: 0 3%;
        }

        nav a {
          font-size: 0.9rem;
          padding: 8px 16px;
        }

        .nav-center {
          gap: 6px;
        }
      }

      @media (max-width: 1024px) {
        nav .nav-center,
        nav .nav-right {
          display: none;
        }

        .nav-toggle {
          display: flex;
        }
      }

      @media (max-width: 900px) {
        nav {
          padding: 0 2%;
        }

        nav a {
          font-size: 0.85rem;
          padding: 8px 14px;
        }
      }

      @media (max-width: 768px) {
        nav {
          padding: 0 20px;
          min-height: 65px;
        }

        .nav-mobile {
          position: fixed;
          top: 65px;
          left: 0;
          width: 100%;
          max-width: 100%;
          height: calc(100vh - 65px);
          background: rgba(255, 255, 255, 0.98);
          display: none;
          flex-direction: column;
          align-items: center;
          justify-content: flex-start;
          padding: 30px 20px;
          z-index: 9999;
          overflow-y: auto;
        }

        .nav-mobile.show {
          display: flex;
        }

        .nav-mobile a {
          color: #475569;
          font-size: 1.1rem;
          font-weight: 500;
          padding: 15px 25px;
          margin: 6px 0;
          border-radius: 8px;
          width: 80%;
          max-width: 300px;
          text-align: center;
          background: #f8fafc;
          border: 1px solid #e2e8f0;
          transition: all 0.2s ease;
        }

        .nav-mobile a:hover {
          background: #667eea;
          color: #fff;
        }
      }

      @media (max-width: 600px) {
        .brand-link span {
          display: none;
        }
      }

      @media (max-width: 480px) {
        nav {
          min-height: 60px;
          padding: 0 16px;
        }

        nav img#brand-logo {
          width: 38px;
          height: 38px;
        }

        .nav-mobile {
          top: 60px;
          height: calc(100vh - 60px);
          padding: 25px 16px;
        }

        .nav-mobile a {
          font-size: 1rem;
          padding: 12px 20px;
          width: 85%;
        }
      }

      main {
        padding-top: 120px;
      }

      .hero-section {
        text-align: center;
        color: var(--text-strong);
        padding: 88px 20px 56px;
        position: relative;
        overflow: hidden;
      }

      .hero-section > * {
        position: relative;
        z-index: 1;
      }

      .hero-section h1 {
        font-size: clamp(2.4rem, 6vw, 4rem);
        font-weight: 800;
        margin-bottom: 12px;
        letter-spacing: -0.03em;
      }

      .hero-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        background: rgba(255, 255, 255, 0.9);
        border: 1px solid rgba(15, 23, 42, 0.08);
        border-radius: 50px;
        padding: 0.75rem 1.5rem;
        margin-bottom: 1.5rem;
        font-size: 0.9rem;
        font-weight: 600;
        color: #0f172a;
        box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
      }

      .hero-section .subtitle {
        font-size: clamp(1rem, 2.8vw, 1.2rem);
        opacity: 0.92;
        margin-bottom: 16px;
      }

      .hero-section .description {
        max-width: 760px;
        margin: 0 auto;
        opacity: 0.88;
        line-height: 1.7;
        font-size: clamp(0.95rem, 2.5vw, 1.05rem);
      }

      .hero-actions {
        margin-top: 26px;
        display: flex;
        justify-content: center;
        gap: 16px;
        flex-wrap: wrap;
      }

      .primary-cta,
      .secondary-cta {
        padding: 14px 28px;
        border-radius: 999px;
        font-weight: 700;
        text-decoration: none;
        border: 2px solid transparent;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .primary-cta {
        background: linear-gradient(135deg, var(--brand1), var(--brand2));
        color: #fff;
        box-shadow: 0 15px 30px rgba(79, 70, 229, 0.35);
      }

      .secondary-cta {
        background: rgba(15, 23, 42, 0.06);
        color: #0f172a;
        border-color: rgba(15, 23, 42, 0.12);
      }

      .primary-cta:hover,
      .secondary-cta:hover {
        transform: translateY(-2px);
      }

      .main-container {
        width: min(1200px, 100%);
        margin: 0 auto;
        padding: 0 clamp(16px, 4vw, 32px) 80px;
      }

      .content-section {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 28px;
        padding: clamp(32px, 4vw, 56px);
        margin-bottom: 40px;
        box-shadow: 0 25px 60px rgba(15, 23, 42, 0.15);
        border: 1px solid rgba(226, 232, 240, 0.6);
      }

      .section-header {
        text-align: center;
        margin-bottom: 36px;
      }

      .section-header .eyebrow {
        display: inline-block;
        text-transform: uppercase;
        letter-spacing: 0.2em;
        font-size: 0.8rem;
        color: var(--brand1);
        background: rgba(99, 102, 241, 0.08);
        border: 1px solid rgba(99, 102, 241, 0.2);
        border-radius: 999px;
        padding: 6px 12px;
        margin-bottom: 12px;
      }

      .section-header h2 {
        font-size: clamp(1.8rem, 4vw, 2.3rem);
        color: var(--text-strong);
        margin: 0 0 12px;
      }

      .section-header p {
        max-width: 720px;
        margin: 0 auto;
      }

      .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 24px;
      }

      .feature-card {
        padding: 28px;
        border-radius: 22px;
        border: 2px solid rgba(99, 102, 241, 0.18);
        background: linear-gradient(135deg, #f9f7ff 0%, #fff 100%);
        box-shadow: 0 20px 40px rgba(99, 102, 241, 0.1);
        transition: transform 0.25s ease, box-shadow 0.25s ease;
      }

      .feature-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 20px 45px rgba(99, 102, 241, 0.18);
      }

      .feature-card h3 {
        margin-top: 0;
        color: var(--text-strong);
      }

      .quiz-shell {
        margin-bottom: 40px;
      }

      .quiz-header {
        background: linear-gradient(135deg, var(--brand1), var(--brand2));
        color: #fff;
        border-radius: 24px 24px 0 0;
        padding: 32px 28px;
        text-align: center;
      }

      .game-stage {
        background: var(--stage);
        border: 1px solid var(--stage-border);
        border-radius: 0 0 28px 28px;
        padding: clamp(24px, 4vw, 48px);
        box-shadow: 0 40px 80px rgba(3, 5, 20, 0.6);
        color: #f8fafc;
      }

      .game-grid {
        display: grid;
        grid-template-columns: 280px 1fr;
        gap: clamp(18px, 3vw, 40px);
        align-items: stretch;
      }

      .guide-panel {
        background: rgb(87, 87, 182);
        border-radius: 24px;
        padding: 20px;
        border: 1px solid rgba(39, 8, 8, 0.08);
        text-align: center;
        box-shadow: inset 0 0 35px rgba(0, 0, 0, 0.45);
      }

      .guide-avatar {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
      }

      .guide-avatar img {
        width: min(220px, 70%);
        height: auto;
        border-radius: 18px;
        padding: 12px;
      }

      .guide-line {
        color: #fef3c7;
        font-weight: 600;
        margin: 8px 0 0;
        min-height: 48px;
      }

      .bubble {
        background: var(--surface-alt);
        border-radius: 30px;
        padding: clamp(20px, 3vw, 36px);
        color: var(--text-strong);
        position: relative;
        border: 1px solid rgba(255, 255, 255, 0.5);
      }

      .bubble-header {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        justify-content: space-between;
        align-items: center;
      }

      .status-chip {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        border-radius: 999px;
        background: linear-gradient(120deg, #ece9ff, #fffaf0);
        font-weight: 600;
        color: #4c1d95;
      }

      .status-chip::before {
        content: "";
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #22c55e;
        box-shadow: 0 0 10px rgba(34, 197, 94, 0.8);
      }

      .question {
        font-size: clamp(1.25rem, 2.4vw, 1.75rem);
        margin: 18px 0 24px;
        min-height: 64px;
      }

      .actions {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
      }

      .btn {
        flex: 1;
        min-width: 140px;
        padding: 15px 20px;
        border-radius: 999px;
        border: none;
        font-size: 1rem;
        font-weight: 700;
        text-transform: none;
        letter-spacing: 0.01em;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
      }

      .btn:disabled {
        opacity: 0.35;
        cursor: not-allowed;
        box-shadow: none;
      }

      .btn:focus-visible {
        outline: 3px solid rgba(99, 102, 241, 0.4);
        outline-offset: 3px;
      }

      .btn.yes {
        background: linear-gradient(135deg, #4ade80, #22c55e);
        color: #0f172a;
        box-shadow: 0 12px 25px rgba(34, 197, 94, 0.35);
      }

      .btn.no {
        background: linear-gradient(135deg, #fb7185, #f43f5e);
        color: #fff;
        box-shadow: 0 12px 25px rgba(244, 63, 94, 0.35);
      }

      .btn.restart {
        background: linear-gradient(135deg, var(--brand3), #f97316);
        color: #4b1500;
        width: 100%;
      }

      .guess-panel {
        margin-top: 26px;
        padding: 22px 26px;
        border-radius: 28px;
        border: 1px solid rgba(250, 204, 21, 0.35);
        background: linear-gradient(
          135deg,
          rgba(250, 204, 21, 0.12),
          rgba(255, 255, 255, 0.85)
        );
        box-shadow: 0 25px 60px rgba(250, 204, 21, 0.25);
        color: #3d1b00;
        display: none;
        gap: 20px;
        align-items: center;
      }

      .guess-panel.active {
        display: flex;
        flex-wrap: wrap;
      }

      .guess-panel-icon {
        width: 64px;
        height: 64px;
        border-radius: 18px;
        background: radial-gradient(circle at 30% 30%, #fffbe6, #facc15);
        display: grid;
        place-items: center;
        font-size: 1.8rem;
        box-shadow: inset 0 0 18px rgba(255, 255, 255, 0.7);
      }

      .guess-panel-body {
        flex: 1 1 220px;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .guess-label {
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.2em;
        color: rgba(61, 27, 0, 0.75);
        margin: 0;
      }

      .guess-text {
        margin: 0;
        font-size: clamp(1.1rem, 4vw, 1.5rem);
        font-weight: 700;
        color: #361300;
      }

      .guess-hint {
        margin: 0;
        font-size: 0.95rem;
        color: rgba(61, 27, 0, 0.7);
      }

      .lower-panels {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 18px;
        margin-top: 28px;
      }

      .history-panel {
        position: relative;
        background: linear-gradient(135deg, #ffffff 0%, #f4f4ff 100%);
        color: #1e1b4b;
        border-radius: 24px;
        padding: 24px;
        border: 1px solid rgba(148, 163, 184, 0.35);
        box-shadow: 0 20px 50px rgba(79, 70, 229, 0.12);
        overflow: hidden;
      }

      .history-panel::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(
          circle at top right,
          rgba(102, 126, 234, 0.15),
          transparent 55%
        );
        pointer-events: none;
      }

      .history-panel h3 {
        margin-top: 0;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .history-panel h3::after {
        content: "Trail";
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.2em;
        color: var(--brand1);
        background: rgba(102, 126, 234, 0.12);
        border-radius: 999px;
        padding: 4px 10px;
      }

      .history {
        list-style: none;
        margin: 0;
        padding: 0 0 0 34px;
        max-height: 240px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 12px;
        position: relative;
      }

      .history::before {
        content: "";
        position: absolute;
        left: 16px;
        top: 6px;
        bottom: 6px;
        width: 2px;
        background: linear-gradient(
          180deg,
          rgba(102, 126, 234, 0.5),
          rgba(118, 75, 162, 0.5)
        );
      }

      .history-item {
        position: relative;
        padding: 12px 16px 12px 20px;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.9);
        border: 1px solid rgba(148, 163, 184, 0.35);
        box-shadow: 0 10px 25px rgba(15, 23, 42, 0.08);
      }

      .history-item::before {
        content: "";
        position: absolute;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--brand1);
        border: 2px solid #fff;
        left: -27px;
        top: 18px;
        box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.25);
      }

      .history-question {
        margin: 0;
        font-weight: 600;
        color: #0f172a;
        line-height: 1.4;
      }

      .history-answer {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-weight: 700;
        font-size: 0.85rem;
        border-radius: 999px;
        padding: 4px 12px;
        margin-top: 8px;
        text-transform: none;
        letter-spacing: 0.02em;
      }

      /* Footer (class-based; no inline handlers) */
      .site-footer {
        background: linear-gradient(
          135deg,
          #0f172a 0%,
          #1e293b 50%,
          #334155 100%
        );
        color: #ffffff;
        margin-top: 80px;
        position: relative;
        overflow: hidden;
      }

      .site-footer__pattern {
        position: absolute;
        inset: 0;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="footer-pattern" width="30" height="30" patternUnits="userSpaceOnUse"><circle cx="15" cy="15" r="0.5" fill="white" opacity="0.05"/></pattern></defs><rect width="100" height="100" fill="url(%23footer-pattern)"/></svg>');
        z-index: 1;
      }

      .site-footer__content {
        position: relative;
        z-index: 2;
        max-width: 1200px;
        margin: 0 auto;
        padding: 60px 40px 40px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 40px;
      }

      .site-footer__brand {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
      }

      .site-footer__logo {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        margin-bottom: 16px;
        box-shadow: 0 8px 28px rgba(99, 102, 241, 0.22);
      }

      .site-footer__title {
        color: #ffffff;
        font-size: 1.5rem;
        margin: 0 0 16px;
        font-weight: 700;
        letter-spacing: -0.02em;
      }

      .site-footer__desc {
        color: #94a3b8;
        line-height: 1.6;
        margin: 0 0 20px;
        font-size: 1rem;
      }

      .site-footer__social {
        display: flex;
        gap: 16px;
        margin-bottom: 20px;
      }

      .site-footer__socialLink {
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: #ffffff;
        text-decoration: none;
        transition: transform 0.2s ease, background 0.2s ease;
        backdrop-filter: blur(10px);
      }

      .site-footer__socialLink:hover {
        transform: translateY(-3px);
        background: rgba(255, 255, 255, 0.16);
      }

      .site-footer__note {
        color: #94a3b8;
        font-size: 0.9rem;
        margin: 0;
        line-height: 1.5;
      }

      .site-footer__heading {
        color: #e2e8f0;
        font-size: 1.125rem;
        margin: 0 0 20px;
        font-weight: 700;
        letter-spacing: -0.01em;
      }

      .site-footer__list {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .site-footer__listItem {
        margin-bottom: 12px;
      }

      .site-footer__link {
        color: #94a3b8;
        text-decoration: none;
        transition: color 0.2s ease;
        font-size: 0.95rem;
      }

      .site-footer__link:hover {
        color: #c7d2fe;
      }

      .site-footer__bottom {
        position: relative;
        z-index: 2;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        padding: 30px 40px;
      }

      .site-footer__bottomInner {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 20px;
      }

      .site-footer__legal {
        color: #94a3b8;
        margin: 0;
        font-size: 0.9rem;
      }

      .site-footer__disclaimer {
        color: #64748b;
        font-size: 0.85rem;
        margin: 20px auto 0;
        text-align: center;
        line-height: 1.5;
        max-width: 600px;
      }

      .history-answer.yes {
        background: rgba(16, 185, 129, 0.18);
        color: #047857;
      }

      .history-answer.no {
        background: rgba(248, 113, 113, 0.2);
        color: #b91c1c;
      }

      .insight-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
      }

      .insight-card {
        padding: 24px;
        border-radius: 20px;
        border: 1px solid rgba(15, 23, 42, 0.08);
        background: #f8fafc;
      }

      a.insight-card {
        display: block;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        cursor: pointer;
      }
      a.insight-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
      }

      .faq-item {
        border: 1px solid rgba(15, 23, 42, 0.08);
        border-radius: 16px;
        padding: 20px 24px;
        background: #fff;
        box-shadow: 0 10px 24px rgba(15, 23, 42, 0.08);
      }

      /* --- Quiz experience refresh --- */
      .quiz-shell {
        position: relative;
        margin-bottom: 56px;
        border-radius: 36px;
        background: linear-gradient(
          180deg,
          rgba(15, 23, 42, 0.92),
          rgba(2, 6, 23, 0.94)
        );
        border: 1px solid rgba(255, 255, 255, 0.08);
        padding-bottom: clamp(28px, 4vw, 52px);
        overflow: hidden;
        box-shadow: 0 45px 110px rgba(2, 6, 23, 0.5);
        isolation: isolate;
      }

      .quiz-shell::before,
      .quiz-shell::after {
        content: "";
        position: absolute;
        width: 420px;
        height: 420px;
        border-radius: 50%;
        background: radial-gradient(
          circle,
          rgba(79, 70, 229, 0.28),
          transparent 65%
        );
        z-index: -1;
      }

      .quiz-shell::before {
        top: -140px;
        left: -120px;
      }

      .quiz-shell::after {
        bottom: -180px;
        right: -140px;
        background: radial-gradient(
          circle,
          rgba(245, 158, 11, 0.22),
          transparent 70%
        );
      }

      .quiz-header {
        background: linear-gradient(
          120deg,
          rgba(255, 255, 255, 0.12),
          rgba(255, 255, 255, 0.02)
        );
        padding: clamp(36px, 5vw, 56px);
        text-align: center;
        color: #f8fafc;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .quiz-header .quiz-tag {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        margin: 0 auto 6px;
        padding: 4px 14px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        font-size: 0.85rem;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        color: rgba(255, 255, 255, 0.85);
      }

      .quiz-metrics {
        display: grid;
        grid-template-columns: repeat(3, minmax(200px, 1fr));
        gap: 20px;
        padding: 0 clamp(24px, 4vw, 60px);
        margin-top: -32px;
      }

      .metric-card {
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.18);
        border-radius: 24px;
        padding: 20px 22px;
        color: #f8fafc;
        box-shadow: 0 25px 60px rgba(5, 5, 20, 0.35);
      }

      .metric-card.highlight {
        background: linear-gradient(
          135deg,
          rgba(79, 70, 229, 0.92),
          rgba(124, 58, 237, 0.92)
        );
      }

      .metric-card.highlight .metric-value,
      .metric-card.highlight .metric-label,
      .metric-card.highlight .metric-note {
        color: #fffce7;
      }

      .metric-label {
        font-size: 0.85rem;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        color: rgba(248, 250, 252, 0.75);
        margin-bottom: 8px;
      }

      .metric-value {
        font-size: 1.5rem;
        font-weight: 700;
        margin: 0;
        word-break: break-word;
      }

      .metric-note {
        margin: 8px 0 0;
        color: rgba(248, 250, 252, 0.7);
        font-size: 0.92rem;
      }

      .game-stage {
        background: linear-gradient(
          180deg,
          rgba(12, 16, 43, 0.98),
          rgba(2, 6, 23, 0.96)
        );
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 32px;
        margin: clamp(20px, 4vw, 52px);
        padding: clamp(24px, 4vw, 60px);
        box-shadow: 0 55px 110px rgba(3, 7, 18, 0.75);
      }

      .game-grid {
        display: grid;
        grid-template-columns: minmax(240px, 320px) 1fr;
        gap: clamp(24px, 4vw, 50px);
        align-items: stretch;
      }

      .guide-panel {
        background: linear-gradient(
          160deg,
          rgba(99, 102, 241, 0.25),
          rgba(14, 116, 144, 0.25)
        );
        border-radius: 28px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        padding: clamp(22px, 3vw, 32px);
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 12px;
        text-align: center;
        color: rgba(248, 250, 252, 0.92);
      }

      .guide-panel::before {
        content: "";
        position: absolute;
        inset: 10%;
        border-radius: 24px;
        border: 1px dashed rgba(255, 255, 255, 0.3);
        pointer-events: none;
      }

      .guide-avatar {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
      }

      .guide-avatar img {
        width: 85%;
        max-width: 100%;
        height: auto;
        display: block;
        margin: 0 auto;
        border-radius: 24px;
        background: rgba(255, 255, 255, 0.08);
        box-shadow: 0 25px 45px rgba(0, 0, 0, 0.45);
      }

      .guide-line {
        font-size: 1.05rem;
      }

      .bubble {
        position: relative;
        background: rgba(255, 255, 255, 0.07);
        border: 1px solid rgba(255, 255, 255, 0.18);
        border-radius: 32px;
        padding: clamp(28px, 4vw, 48px);
        box-shadow: inset 0 0 30px rgba(255, 255, 255, 0.05),
          0 40px 90px rgba(0, 0, 0, 0.35);
        color: rgba(248, 250, 252, 0.92);
      }

      .bubble::before {
        content: "";
        position: absolute;
        inset: 16px;
        border-radius: 26px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        pointer-events: none;
      }

      .bubble-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 12px;
        margin-bottom: 16px;
      }

      .live-pill {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 8px 16px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.12);
        font-weight: 600;
        color: #f8fafc;
      }

      .live-pill .live-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #22c55e;
        box-shadow: 0 0 10px rgba(34, 197, 94, 0.8);
        display: inline-block;
      }

      .status-stack {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: flex-end;
      }

      .status-chip {
        background: rgba(255, 255, 255, 0.18);
        color: #f8fafc;
        font-weight: 700;
        padding: 8px 16px;
        border-radius: 18px;
        text-transform: uppercase;
        font-size: 0.78rem;
        letter-spacing: 0.1em;
      }

      .status-chip.soft {
        background: rgba(255, 255, 255, 0.12);
        color: rgba(248, 250, 252, 0.75);
      }

      .question-face {
        margin-top: 12px;
      }

      .question-intro {
        text-transform: uppercase;
        letter-spacing: 0.18em;
        font-size: 0.8rem;
        color: rgba(248, 250, 252, 0.7);
        margin-bottom: 8px;
      }

      .question {
        font-size: clamp(1.5rem, 3vw, 2rem);
        margin: 0 0 8px;
        color: #f8fafc;
        min-height: 64px;
      }

      .question-hint {
        margin: 0 0 24px;
        color: rgba(248, 250, 252, 0.75);
      }

      .actions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 16px;
        margin-bottom: 18px;
      }

      .btn {
        border: 0;
        border-radius: 28px;
        padding: 18px;
        font-size: 1rem;
        font-weight: 700;
        text-transform: none;
        letter-spacing: -0.01em;
        cursor: pointer;
        color: #0f172a;
        display: flex;
        flex-direction: column;
        gap: 4px;
        align-items: center;
        min-height: 104px;
        position: relative;
        overflow: hidden;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .btn:focus-visible {
        outline: 3px solid rgba(99, 102, 241, 0.45);
        outline-offset: 3px;
      }

      .btn span {
        font-size: 1.1rem;
      }

      .btn small {
        font-size: 0.75rem;
        letter-spacing: 0.08em;
        opacity: 0.8;
      }

      .btn::after {
        content: "";
        position: absolute;
        inset: 2px;
        border-radius: 26px;
        border: 1px solid rgba(255, 255, 255, 0.4);
        opacity: 0;
        transition: opacity 0.2s ease;
      }

      .btn:hover::after,
      .btn:focus-visible::after {
        opacity: 1;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 20px 35px rgba(0, 0, 0, 0.25);
      }

      .btn:disabled {
        opacity: 0.35;
        cursor: not-allowed;
        box-shadow: none;
        transform: none;
      }

      .btn.yes {
        background: linear-gradient(135deg, #22c55e, #16a34a);
      }

      .btn.no {
        background: linear-gradient(135deg, #ef4444, #dc2626);
        color: #fff;
      }

      .btn.restart {
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.24);
        color: rgba(226, 232, 240, 0.92);
        min-height: auto;
        flex-direction: row;
        justify-content: center;
      }

      .restart-hint {
        margin-top: 8px;
        color: rgba(248, 250, 252, 0.65);
        text-align: center;
        font-size: 0.85rem;
      }

      .guess-panel {
        position: relative;
        margin-top: 32px;
        border-radius: 36px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        background: linear-gradient(
          180deg,
          rgba(5, 8, 31, 0.96),
          rgba(2, 6, 23, 0.97)
        );
        overflow: hidden;
        display: none;
        box-shadow: 0 45px 120px rgba(2, 6, 23, 0.65);
        isolation: isolate;
      }

      .guess-panel.active {
        display: block;
      }

      .guess-panel.has-flag .result-flag {
        opacity: 0.75;
        transform: scale(1.05);
      }

      .guess-panel:not(.has-flag) .result-flag-hero {
        display: none;
      }

      .result-flag-hero {
        width: 100%;
        border-radius: 22px;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.18);
        background: rgba(255, 255, 255, 0.06);
      }

      .result-flag-img {
        display: block;
        width: 100%;
        height: clamp(160px, 22vw, 260px);
        object-fit: cover;
      }

      .result-flag {
        position: absolute;
        inset: 0;
        background: radial-gradient(
          circle at top left,
          rgba(255, 255, 255, 0.08),
          rgba(12, 16, 43, 0.8)
        );
        background-size: cover;
        background-position: center;
        opacity: 0.25;
        filter: saturate(1.3) contrast(1.05);
        transition: opacity 0.4s ease, transform 0.4s ease;
      }

      .result-flag::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          120deg,
          rgba(2, 6, 23, 0.8),
          rgba(11, 14, 41, 0.25)
        );
      }

      .guess-panel-body {
        position: relative;
        z-index: 2;
        padding: clamp(30px, 4vw, 54px);
        display: flex;
        flex-direction: column;
        gap: 18px;
        color: #f8fafc;
      }

      .result-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 12px;
      }

      .result-pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 16px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.25);
        letter-spacing: 0.18em;
        text-transform: uppercase;
        font-size: 0.75rem;
      }

      .guess-live-pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 14px;
        border-radius: 999px;
        background: rgba(34, 197, 94, 0.15);
        border: 1px solid rgba(34, 197, 94, 0.4);
        color: #4ade80;
        font-size: 0.78rem;
        text-transform: uppercase;
        letter-spacing: 0.14em;
      }

      .result-eyebrow {
        text-transform: uppercase;
        letter-spacing: 0.4em;
        font-size: 0.78rem;
        color: rgba(248, 250, 252, 0.65);
        margin: 0;
      }

      .guess-text {
        font-size: clamp(1.8rem, 3.2vw, 2.4rem);
        margin: 0;
        color: #ffffff;
        text-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
      }

      .guess-hint {
        margin: 0;
        color: rgba(248, 250, 252, 0.7);
      }

      .result-trait {
        margin: 0;
        color: rgba(248, 250, 252, 0.8);
        font-size: 0.98rem;
      }

      .result-confidence {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .result-confidence-meta {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .guess-meta-label {
        display: block;
        font-size: 0.78rem;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: rgba(248, 250, 252, 0.72);
      }

      .guess-meta-value {
        display: block;
        font-weight: 700;
        font-size: 1.05rem;
        margin-top: 4px;
      }

      .guess-meter {
        width: 100%;
        height: 10px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.15);
        overflow: hidden;
      }

      .guess-meter-fill {
        display: block;
        height: 100%;
        border-radius: 999px;
        background: linear-gradient(90deg, #4f46e5, #f59e0b);
        width: 45%;
        transition: width 0.4s ease;
      }

      .guess-meta-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 14px;
      }

      .guess-meta-card {
        background: rgba(2, 6, 23, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.18);
        border-radius: 20px;
        padding: 16px 18px;
        color: #f8fafc;
        box-shadow: 0 25px 60px rgba(2, 6, 23, 0.45);
      }

      .lower-panels {
        margin-top: 36px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
      }

      .history-panel {
        background: rgba(255, 255, 255, 0.92);
        border-radius: 28px;
        padding: 26px;
        border: 1px solid rgba(148, 163, 184, 0.35);
        box-shadow: 0 30px 70px rgba(15, 23, 42, 0.18);
        color: #0f172a;
      }

      .history-panel h3 {
        margin-top: 0;
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 1.1rem;
      }

      .history {
        padding: 0;
        margin: 16px 0 0;
      }

      .history::before,
      .history-item::before {
        display: none;
      }

      .history-item {
        border-radius: 18px;
        border: 1px solid rgba(148, 163, 184, 0.35);
        box-shadow: 0 15px 30px rgba(15, 23, 42, 0.12);
        padding: 16px;
      }

      .intel-panel {
        background: linear-gradient(
          145deg,
          rgba(78, 205, 196, 0.15),
          rgba(99, 102, 241, 0.15)
        );
        border-radius: 28px;
        padding: 26px;
        border: 1px solid rgba(255, 255, 255, 0.25);
        color: #ecfeff;
        box-shadow: 0 35px 80px rgba(2, 6, 23, 0.4);
      }

      .intel-panel h3 {
        margin-top: 0;
        color: #ecfeff;
      }

      .intel-panel p {
        color: rgba(236, 254, 255, 0.85);
      }

      .intel-tags {
        list-style: none;
        padding: 0;
        margin: 18px 0 0;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      .intel-tags li {
        background: rgba(255, 255, 255, 0.15);
        border-radius: 999px;
        padding: 6px 14px;
        font-size: 0.8rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }

      @media (max-width: 1100px) {
        .quiz-metrics {
          grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        }
      }

      @media (max-width: 900px) {
        .quiz-shell {
          margin-bottom: 40px;
          border-radius: 28px;
        }

        .game-grid {
          grid-template-columns: 1fr;
          gap: 24px;
        }

        .guide-panel {
          order: 2;
          min-height: auto;
        }

        .bubble {
          order: 1;
        }

        .guess-panel-body {
          padding: clamp(24px, 6vw, 40px);
        }

        .result-header {
          flex-direction: column;
          align-items: flex-start;
        }
      }

      @media (max-width: 768px) {
        .hero-actions {
          width: min(320px, 100%);
          margin: 24px auto 0;
          flex-direction: column;
        }

        .quiz-metrics {
          grid-template-columns: 1fr;
          padding: 0 clamp(12px, 6vw, 24px);
        }

        .metric-card {
          text-align: center;
        }

        .lower-panels {
          grid-template-columns: 1fr;
        }

        .status-stack {
          justify-content: flex-start;
          width: 100%;
          flex-direction: column;
          align-items: flex-start;
        }
      }

      @media (max-width: 600px) {
        .quiz-header {
          padding: 30px 20px 40px;
        }

        .quiz-metrics {
          padding: 0 20px;
        }

        .bubble {
          padding: 24px 18px;
        }

        .btn {
          min-height: 90px;
        }

        .guess-meta-grid {
          grid-template-columns: 1fr;
        }

        .result-pill,
        .guess-live-pill {
          width: 100%;
          justify-content: center;
        }

        .result-confidence-meta {
          flex-direction: column;
          align-items: flex-start;
          gap: 6px;
        }

        .history-panel,
        .intel-panel {
          padding: 20px;
        }

        .guess-text {
          font-size: clamp(1.35rem, 6vw, 1.7rem);
        }

        .result-trait,
        .guess-hint {
          font-size: 0.9rem;
        }

        .guess-panel {
          margin-top: 24px;
        }

        .question {
          font-size: clamp(1.2rem, 5vw, 1.6rem);
          min-height: auto;
        }
      }

      @media (max-width: 1024px) {
        main {
          padding-top: 108px;
        }

        .hero-section {
          padding: 70px 24px 50px;
        }

        .hero-section h1 {
          font-size: clamp(2.2rem, 5vw, 3.4rem);
        }

        .quiz-shell {
          margin-top: 16px;
        }

        .game-grid {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 640px) {
        main {
          padding-top: 96px;
        }

        .hero-section {
          padding: 60px 16px 40px;
        }

        .bubble::after {
          display: none;
        }

        .actions {
          grid-template-columns: 1fr;
        }

        .btn {
          border-radius: 20px;
          width: 100%;
        }

        .guide-panel {
          flex-direction: row;
          align-items: center;
          padding: 18px;
          gap: 14px;
        }

        .guide-avatar {
          flex-direction: row;
          align-items: center;
          gap: 12px;
        }

        .guide-avatar img {
          width: 90px;
          padding: 6px;
        }

        .guide-line {
          font-size: 0.95rem;
          text-align: left;
        }
      }

      @media (max-width: 420px) {
        .guide-avatar {
          justify-content: center;
        }

        .guide-avatar img {
          display: none;
        }

        .guide-panel {
          padding: 16px;
        }

        .guide-line {
          font-size: 0.9rem;
          text-align: center;
        }
      }

      @media (max-width: 480px) {
        .main-container {
          padding: 0 16px 60px;
        }

        .content-section {
          padding: 24px 18px;
        }

        .quiz-header,
        .game-stage {
          padding: 24px 18px;
        }

        .actions {
          gap: 12px;
        }

        .btn {
          min-height: 72px;
          padding: 14px 16px;
        }

        .btn span {
          font-size: 1rem;
        }

        .btn small {
          letter-spacing: 0.12em;
        }

        .quiz-metrics {
          padding: 0;
        }

        .metric-card {
          padding: 16px;
        }

        .guess-panel-body {
          padding: 22px 18px;
        }

        .guess-panel {
          border-radius: 28px;
        }

        .result-flag {
          opacity: 0.35;
        }

        .guess-meta-card {
          padding: 14px;
        }

        .feature-card,
        .insight-card {
          padding: 20px;
        }

        .status-chip {
          width: 100%;
          justify-content: center;
        }

        .quiz-shell {
          border-radius: 22px;
          padding-bottom: 24px;
        }
      }

      @media (max-width: 360px) {
        .hero-section h1 {
          font-size: 1.9rem;
        }

        .btn {
          min-width: auto;
          width: 100%;
        }

        .status-chip {
          font-size: 0.85rem;
        }

        .hero-badge {
          width: 100%;
          justify-content: center;
        }

        .result-pill,
        .guess-live-pill {
          font-size: 0.68rem;
          letter-spacing: 0.12em;
        }
      }

      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      }
    </style>
  </head>
  <body>
    <a class="skip-link" href="#mainContent">Skip to main content</a>
    <!-- Top Navigation -->
    <nav role="navigation" aria-label="Main navigation" id="navbar">
      <div class="nav-container">
        <div class="nav-left">
          <a href="index.html" class="brand-link" aria-label="Zinvana home">
            <img src="zinvanalogo.png" alt="Zinvana logo" id="brand-logo" />
            <span>Zinvana</span>
          </a>
        </div>

        <div class="nav-center">
          <a href="#faq">FAQ</a>
          <a href="leaders.html">Leaders Quiz</a>
          <a href="mbti-personality-quiz.html">MBTI Personality Test</a>
          <a href="football-personality-quiz.html">Football Quiz</a>
        </div>

        <div class="nav-right">
          <a href="help.html">Help</a>
          <a href="about.html">About</a>
        </div>

        <button
          class="nav-toggle"
          id="nav-toggle"
          aria-label="Toggle navigation"
          aria-controls="nav-mobile"
          aria-expanded="false"
          type="button"
        >
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>

      <div class="nav-mobile" id="nav-mobile">
        <a href="#faq">FAQ</a>
        <a href="leaders.html">Leaders Quiz</a>
        <a href="mbti-personality-quiz.html">MBTI Personality Test</a>
        <a href="football-personality-quiz.html">Football Quiz</a>
        <a href="help.html">Help</a>
        <a href="about.html">About Us</a>
      </div>
    </nav>
    <main id="mainContent" class="main-content" role="main" aria-busy="true">
      <section class="hero-section" id="hero">
        <div class="hero-badge">
          <span>Geo-Zini by Zinvana</span>
        </div>
        <h1>Geo-Zini Country Guesser</h1>
        <p class="subtitle">Think of any country. Answer yes or no.</p>
        <p class="description">
          Geo-Zini uses information-gain questions to narrow the world down to a
          confident guessfast, and without sign-up.
        </p>
        <div class="hero-actions">
          <a class="primary-cta" href="#playSection">Start guessing</a>
          <a class="secondary-cta" href="#how-it-works">Explore features</a>
        </div>
      </section>
      <div class="main-container">
        <section class="content-section" id="how-it-works">
          <div class="section-header">
            <span class="eyebrow">Overview</span>
            <h2>How the Geo-Zini narrows the field</h2>
            <p>
              The Geo-Zini uses a dataset of 190+ countries and territories,
              applying entropy-based questioning to efficiently zero in on your
              selection.
            </p>
          </div>
          <div class="features-grid">
            <article class="feature-card">
              <h3>Full world coverage</h3>
              <p>
                Every independent and dependent territory from the UN dataset is
                pre-normalised so the genie recognises spelling variations and
                aliases.
              </p>
            </article>
            <article class="feature-card">
              <h3>Smart questioning</h3>
              <p>
                Each question is selected to maximise information gain,
                effectively halving the pool of possibilities with each answer.
              </p>
            </article>
            <article class="feature-card">
              <h3>Live transparency</h3>
              <p>
                Status chips, history logs, and accessible announcements keep
                you informed about how many countries are still in play.
              </p>
            </article>
          </div>
        </section>

        <section
          class="quiz-shell"
          id="playSection"
          aria-labelledby="play-heading"
        >
          <div class="quiz-header">
            <p class="quiz-tag">Signature challenge</p>
            <h2 id="play-heading">Play the Geo-Zini challenge</h2>
            <p>
              Answer yes/no (or tap restart) to guide the Geo-Zini toward your
              country.
            </p>
          </div>
          <div
            class="quiz-metrics"
            role="group"
            aria-label="Live session stats"
          >
            <article class="metric-card highlight">
              <p class="metric-label">Live status</p>
              <p class="metric-value" id="status" aria-live="polite">
                Loading dataset...
              </p>
              <p class="metric-note">Auto-updates after every answer</p>
            </article>
            <article class="metric-card">
              <p class="metric-label">Countries loaded</p>
              <p class="metric-value">190+</p>
              <p class="metric-note">UN members & special territories</p>
            </article>
            <article class="metric-card">
              <p class="metric-label">Questioning mode</p>
              <p class="metric-value">Entropy driven</p>
              <p class="metric-note">Designed to halve the pool</p>
            </article>
          </div>
          <section
            class="game-stage"
            id="gameStage"
            data-role="stage"
            aria-busy="true"
          >
            <div class="game-grid">
              <aside class="guide-panel" aria-hidden="true">
                <div class="guide-avatar">
                  <img
                    src="geo-zini-no-background.png"
                    alt="Muscular Zinvana mascot thinking pose"
                  />
                  <p class="guide-line" id="guideLine">
                    I already sense the continent...
                  </p>
                </div>
              </aside>
              <section class="bubble" aria-live="polite">
                <div class="bubble-header">
                  <div class="live-pill">
                    <span class="live-dot" aria-hidden="true"></span>
                    Live deduction
                  </div>
                  <div class="status-stack" aria-hidden="true">
                    <span class="status-chip soft">190+ countries</span>
                    <span class="status-chip soft">Zero ads</span>
                  </div>
                </div>
                <div class="question-face">
                  <p class="question-intro">Geo-Zini asks</p>
                  <h2 class="question" id="question">Preparing the scrolls</h2>
                  <p class="question-hint">
                    Tap "Yes" or "No" &mdash; every answer reshapes the
                    candidate map.
                  </p>
                </div>
                <div class="actions">
                  <button type="button" class="btn yes" id="yesBtn">
                    <span>Yes</span>
                    <small>Sounds accurate</small>
                  </button>
                  <button type="button" class="btn no" id="noBtn">
                    <span>No</span>
                    <small>Ask something else</small>
                  </button>
                </div>
                <button type="button" class="btn restart" id="restartBtn">
                  Start new round
                </button>
                <p class="restart-hint">
                  Resets the board instantly if you want a fresh mystery.
                </p>
              </section>
            </div>
            <div
              class="guess-panel"
              id="guessBox"
              role="status"
              aria-live="assertive"
            >
              <div class="result-flag" id="resultFlag" aria-hidden="true"></div>
              <div class="guess-panel-body">
                <div class="result-flag-hero">
                  <img
                    class="result-flag-img"
                    id="resultFlagImg"
                    alt=""
                    loading="lazy"
                    decoding="async"
                    referrerpolicy="no-referrer"
                  />
                </div>
                <div class="result-header">
                  <span class="result-pill">Geo-Zini result</span>
                  <span class="guess-live-pill" id="resultLivePill">Live</span>
                </div>
                <div>
                  <p class="result-eyebrow">I think you're in</p>
                  <p id="guessText" class="guess-text">
                    Gathering signals from your answers
                  </p>
                </div>
                <p class="guess-hint" id="guessHint">
                  Tap "Yes" to lock it in or "No" to keep narrowing down.
                </p>
                <p class="result-trait" id="resultTrait">
                  Each reply sharpens the silhouette of your secret nation.
                </p>
                <div class="result-confidence">
                  <div class="result-confidence-meta">
                    <span class="guess-meta-label">Confidence</span>
                    <span class="guess-meta-value" id="resultConfidenceValue"
                      >45%</span
                    >
                  </div>
                  <span class="guess-meter">
                    <span
                      class="guess-meter-fill"
                      id="resultConfidenceFill"
                    ></span>
                  </span>
                </div>
                <div class="guess-meta-grid">
                  <div class="guess-meta-card">
                    <span class="guess-meta-label">Region</span>
                    <span class="guess-meta-value" id="resultRegion"></span>
                  </div>
                  <div class="guess-meta-card">
                    <span class="guess-meta-label">Subregion</span>
                    <span class="guess-meta-value" id="resultRealm"></span>
                  </div>
                  <div class="guess-meta-card">
                    <span class="guess-meta-label">Signature trait</span>
                    <span class="guess-meta-value" id="resultSignature"
                      >Awaiting clues</span
                    >
                  </div>
                </div>
              </div>
            </div>
            <div class="lower-panels">
              <article class="history-panel">
                <h3>Question trail</h3>
                <ol
                  class="history"
                  id="history"
                  role="log"
                  aria-live="polite"
                  aria-label="History of questions and answers"
                ></ol>
              </article>
              <article class="intel-panel">
                <h3>Result clarity</h3>
                <p>
                  Each reply squeezes the entropy footprint and nudges Geo-Zini
                  toward a confident revelation. Keep answering to light up the
                  trail.
                </p>
                <ul class="intel-tags" aria-label="Session highlights">
                  <li>Entropy mode</li>
                  <li>Live log</li>
                  <li>Zero signup</li>
                </ul>
              </article>
            </div>
          </section>
        </section>

        <section class="content-section" id="insights">
          <div class="section-header">
            <span class="eyebrow">Strategy</span>
            <h2>Tips for stumping the genie</h2>
          </div>
          <div class="insight-cards">
            <article class="insight-card">
              <h3>Mix hemispheres</h3>
              <p>
                Pick territories that straddle equators or continents to trigger
                nuanced follow-up questions.
              </p>
            </article>
            <article class="insight-card">
              <h3>Remember dependencies</h3>
              <p>
                Dependent territories with limited recognition still sit in the
                data, so the genie can chase niche choices.
              </p>
            </article>
            <article class="insight-card">
              <h3>Use languages as wildcards</h3>
              <p>
                Countries with five or more official languages create
                interesting entropy splits late in the game.
              </p>
            </article>
          </div>
        </section>

        <section class="content-section" id="did-you-know">
          <div class="section-header">
            <span class="eyebrow">Trivia</span>
            <h2>Did You Know?</h2>
            <p>Expand your world knowledge while you play.</p>
          </div>
          <div class="insight-cards">
            <article class="insight-card">
              <h3>Most Neighbors</h3>
              <p>
                China and Russia each share borders with 14 other countries, the
                most of any nation.
              </p>
            </article>
            <article class="insight-card">
              <h3>No Capital?</h3>
              <p>
                Nauru is the only country in the world without an official
                capital city.
              </p>
            </article>
            <article class="insight-card">
              <h3>Time Zones</h3>
              <p>
                France covers the most time zones (12) due to its various
                overseas territories.
              </p>
            </article>
            <article class="insight-card">
              <h3>Shortest Border</h3>
              <p>
                The border between Botswana and Zambia is only about 150 meters
                long.
              </p>
            </article>
          </div>
        </section>

        <section class="content-section" id="under-the-hood">
          <div class="section-header">
            <span class="eyebrow">Under the Hood</span>
            <h2>How Geo-Zini Works</h2>
          </div>
          <div
            class="text-block"
            style="max-width: 800px; margin: 0 auto; color: var(--text)"
          >
            <p style="margin-bottom: 1.5rem">
              Geo-Zini isn't magicit's math. The game uses a decision tree
              algorithm based on <strong>entropy reduction</strong>.
            </p>
            <p style="margin-bottom: 1.5rem">
              Every time you answer "Yes" or "No", the game calculates which
              next question will eliminate the most remaining possibilities.
              It's like a game of "Guess Who?", but with 195+ countries and
              territories.
            </p>
            <p>
              By analyzing properties like hemisphere, language, population, and
              borders, Geo-Zini can usually identify any country in fewer than
              15 questions.
            </p>
          </div>
        </section>

        <section class="content-section" id="faq">
          <div class="section-header">
            <span class="eyebrow">Support</span>
            <h2>Frequently Asked Questions</h2>
          </div>
          <div
            class="faq-grid"
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
              gap: 2rem;
              max-width: 1000px;
              margin: 0 auto;
            "
          >
            <article class="faq-item">
              <h3
                style="
                  color: var(--text-strong);
                  font-weight: 600;
                  margin-bottom: 0.5rem;
                "
              >
                How many questions does it take?
              </h3>
              <p style="color: var(--text)">
                Typically, Geo-Zini can zero in on your country within 15-20
                questions, thanks to its entropy-based questioning strategy.
              </p>
            </article>
            <article class="faq-item">
              <h3
                style="
                  color: var(--text-strong);
                  font-weight: 600;
                  margin-bottom: 0.5rem;
                "
              >
                Is Geo-Zini free to play?
              </h3>
              <p style="color: var(--text)">
                Yes, Geo-Zini is 100% free and requires no registration or
                download.
              </p>
            </article>
            <article class="faq-item">
              <h3
                style="
                  color: var(--text-strong);
                  font-weight: 600;
                  margin-bottom: 0.5rem;
                "
              >
                How many countries are included?
              </h3>
              <p style="color: var(--text)">
                The database includes all 193 UN member states plus major
                territories and observers, totaling over 240 entities.
              </p>
            </article>
            <article class="faq-item">
              <h3
                style="
                  color: var(--text-strong);
                  font-weight: 600;
                  margin-bottom: 0.5rem;
                "
              >
                Do you collect personal data?
              </h3>
              <p style="color: var(--text)">
                No, we do not collect or store any personal data. Your game
                session lives entirely in your browser.
              </p>
            </article>
            <article class="faq-item">
              <h3
                style="
                  color: var(--text-strong);
                  font-weight: 600;
                  margin-bottom: 0.5rem;
                "
              >
                Can I play offline?
              </h3>
              <p style="color: var(--text)">
                Once the page loads, the game logic runs entirely in your
                browser, so you can keep playing even if you lose connection.
              </p>
            </article>
            <article class="faq-item">
              <h3
                style="
                  color: var(--text-strong);
                  font-weight: 600;
                  margin-bottom: 0.5rem;
                "
              >
                Is this good for students?
              </h3>
              <p style="color: var(--text)">
                Absolutely. Teachers use Geo-Zini to help students learn
                geography, critical thinking, and deductive reasoning.
              </p>
            </article>
          </div>
        </section>

        <section class="content-section" id="more-quizzes">
          <div class="section-header">
            <span class="eyebrow">Explore More</span>
            <h2>More from Zinvana</h2>
          </div>
          <div class="insight-cards">
            <a
              href="perfect-country.html"
              class="insight-card"
              style="text-decoration: none; border: 1px solid var(--brand1)"
            >
              <h3 style="color: var(--brand1)">Perfect Country Quiz</h3>
              <p style="color: var(--text)">
                Don't just guess countriesfind the one you belong in. Take our
                lifestyle match quiz.
              </p>
            </a>
            <a
              href="leaders-quiz.html"
              class="insight-card"
              style="text-decoration: none"
            >
              <h3>Leader Personality</h3>
              <p style="color: var(--text)">
                Which historical figure matches your leadership style? Find out
                now.
              </p>
            </a>
            <a
              href="brawlstars-quiz.html"
              class="insight-card"
              style="text-decoration: none"
            >
              <h3>Brawl Stars Quiz</h3>
              <p style="color: var(--text)">
                Find your perfect brawler match in this popular gaming
                personality test.
              </p>
            </a>
          </div>
        </section>
      </div>
    </main>
    <footer class="site-footer">
      <div class="site-footer__pattern" aria-hidden="true"></div>

      <div class="site-footer__content">
        <div class="site-footer__brand">
          <img src="zinvanalogo.png" alt="Zinvana" class="site-footer__logo" />
          <h3 class="site-footer__title">Zinvana</h3>
          <p class="site-footer__desc">
            Discover your personality through engaging quizzes and assessments.
            Explore archetypes, traits, and types in a simple, educational way.
          </p>
          <div class="site-footer__social" aria-label="Social links">
            <a
              class="site-footer__socialLink"
              href="https://x.com/farazglori80528"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Zinvana on X"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"
                />
              </svg>
            </a>
            <a
              class="site-footer__socialLink"
              href="https://www.instagram.com/zinvana_official/?igsh=ZGRpaTR0ZW90bnho#"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Zinvana on Instagram"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"
                />
              </svg>
            </a>
          </div>
          <p class="site-footer__note">Follow for new quizzes and updates.</p>
        </div>

        <div>
          <h4 class="site-footer__heading">Popular Quizzes</h4>
          <ul class="site-footer__list">
            <li class="site-footer__listItem">
              <a class="site-footer__link" href="leaders.html"
                >Historical Leaders Personality Quiz</a
              >
            </li>
            <li class="site-footer__listItem">
              <a class="site-footer__link" href="football-personality-quiz.html"
                >Football Personality Quiz</a
              >
            </li>
            <li class="site-footer__listItem">
              <a class="site-footer__link" href="wojak-personality-quiz.html"
                >Wojak Personality Quiz</a
              >
            </li>
            <li class="site-footer__listItem">
              <a class="site-footer__link" href="perfect-country.html"
                >Perfect Country Quiz</a
              >
            </li>
            <li class="site-footer__listItem">
              <a
                class="site-footer__link"
                href="youtubers-personality-quiz.html"
                >YouTubers Personality Quiz</a
              >
            </li>
          </ul>
        </div>

        <div>
          <h4 class="site-footer__heading">Resources</h4>
          <ul class="site-footer__list">
            <li class="site-footer__listItem">
              <a class="site-footer__link" href="about.html">About</a>
            </li>
            <li class="site-footer__listItem">
              <a class="site-footer__link" href="privacy.html">Privacy</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="site-footer__bottom">
        <div class="site-footer__bottomInner">
          <p class="site-footer__legal">
            &copy; 2025 Zinvana. All rights reserved.
          </p>
          <p class="site-footer__legal">Built by the Zinvana team.</p>
        </div>
        <div class="site-footer__disclaimer">
          All quizzes are for entertainment purposes only. We do not collect
          personal data on this page.
        </div>
      </div>
    </footer>

    <script>
      const navbar = document.getElementById("navbar");
      const navToggle = document.getElementById("nav-toggle");
      const navMobile = document.getElementById("nav-mobile");

      const closeMobileNav = () => {
        navMobile?.classList.remove("show");
        navToggle?.classList.remove("active");
        navToggle?.setAttribute("aria-expanded", "false");
        document.body.style.overflow = "";
      };

      const toggleMobileNav = () => {
        if (!navMobile || !navToggle) {
          return;
        }
        const isOpen = navMobile.classList.contains("show");
        if (isOpen) {
          closeMobileNav();
        } else {
          navMobile.classList.add("show");
          navToggle.classList.add("active");
          navToggle.setAttribute("aria-expanded", "true");
          document.body.style.overflow = "hidden";
        }
      };

      window.addEventListener("scroll", () => {
        if (!navbar) {
          return;
        }
        if (window.pageYOffset > 50) {
          navbar.classList.add("scrolled");
        } else {
          navbar.classList.remove("scrolled");
        }
      });

      navToggle?.addEventListener("click", toggleMobileNav);

      document.addEventListener("click", (event) => {
        if (
          navMobile?.classList.contains("show") &&
          !navMobile.contains(event.target) &&
          !navToggle?.contains(event.target)
        ) {
          closeMobileNav();
        }
      });

      document.addEventListener("keydown", (event) => {
        if (event.key === "Escape" && navMobile?.classList.contains("show")) {
          closeMobileNav();
        }
      });

      navMobile?.querySelectorAll("a").forEach((link) => {
        link.addEventListener("click", closeMobileNav);
      });

      window.addEventListener("resize", () => {
        if (window.innerWidth > 1024 && navMobile?.classList.contains("show")) {
          closeMobileNav();
        }
      });
    </script>

    <script>
      const DATA_SOURCES = [
        "data/world-countries.json",
        "https://restcountries.com/v3.1/all?fields=name,cca3,region,subregion,landlocked,borders,area,latlng,languages,independent,unMember,flags",
      ];

      const mainEl = document.getElementById("mainContent");
      const stageEl = document.getElementById("gameStage");
      const statusEl = document.getElementById("status");
      const questionEl = document.getElementById("question");
      const yesBtn = document.getElementById("yesBtn");
      const noBtn = document.getElementById("noBtn");
      const restartBtn = document.getElementById("restartBtn");
      const historyList = document.getElementById("history");
      const guessBox = document.getElementById("guessBox");
      const guessText = document.getElementById("guessText");
      const guessHintEl = document.getElementById("guessHint");
      const resultTraitEl = document.getElementById("resultTrait");
      const resultRegionEl = document.getElementById("resultRegion");
      const resultRealmEl = document.getElementById("resultRealm");
      const resultSignatureEl = document.getElementById("resultSignature");
      const resultConfidenceValueEl = document.getElementById(
        "resultConfidenceValue"
      );
      const resultConfidenceFillEl = document.getElementById(
        "resultConfidenceFill"
      );
      const resultFlagEl = document.getElementById("resultFlag");
      const resultFlagImgEl = document.getElementById("resultFlagImg");
      const guideLineEl = document.getElementById("guideLine");

      let countries = [];
      let questions = [];
      let remaining = [];
      let asked = new Set();
      let currentQuestion = null;
      let finished = false;

      const guideQuotes = {
        loading: [
          "Oh I am so ready...",
          "Let me lock in for you...",
          "I bet I can find it fast...",
        ],
        idle: [
          "Center your mind on a nation...",
          "Your thoughts echo like trade winds...",
          "Another mystery? I'm ready.",
        ],
        thinking: [
          "I already sense the continent...",
          "I think I know where to look...",
          "Oh yes, this is getting interesting...",
        ],
        guess: [
          "I believe I've found it...",
          "I think this is the one...",
          "Zini's intuition says...",
        ],
        success: [
          "Told you! They call me the Geo-Zini for a reason.",
          "Of course I found it, I am the Geo-Zini!",
          "Stay cool, stay cool...just another mystery solved by the smart Geo-Zini!",
        ],
        stumped: [
          "Hmm, this is weird...maybe try again?",
          "I didn't see that coming...",
          "You got me this time...but it won't happen again!",
        ],
      };

      const speakGuide = (category = "idle") => {
        if (!guideLineEl) {
          return;
        }
        const pool = guideQuotes[category] || guideQuotes.idle;
        const line = pool[Math.floor(Math.random() * pool.length)];
        guideLineEl.textContent = `${line}`;
      };

      const normalizeText = (value = "") =>
        value
          .toLowerCase()
          .normalize("NFD")
          .replace(/[^\w\s-]/g, "")
          .trim();

      const extractName = (entry) => {
        if (!entry) {
          return null;
        }
        if (typeof entry.name === "string") {
          return entry.name;
        }
        if (entry.name?.common) {
          return entry.name.common;
        }
        if (entry.name?.official) {
          return entry.name.official;
        }
        if (entry.commonName) {
          return entry.commonName;
        }
        if (entry.officialName) {
          return entry.officialName;
        }
        return null;
      };

      const normalizeLanguageList = (rawLanguages) => {
        if (!rawLanguages) {
          return [];
        }
        if (Array.isArray(rawLanguages)) {
          return rawLanguages;
        }
        if (typeof rawLanguages === "object") {
          return Object.values(rawLanguages);
        }
        return [rawLanguages];
      };

      const hasLanguage = (languages, needle) =>
        languages.some((lang) => lang.includes(needle));

      const normalizeCountry = (entry) => {
        const countryName = extractName(entry);
        if (!countryName || entry.unMember !== true) {
          return null;
        }

        const languages = normalizeLanguageList(entry.languages).map((lang) =>
          normalizeText(lang)
        );
        const coords = Array.isArray(entry.latlng) ? entry.latlng : [];
        const latitude = typeof coords[0] === "number" ? coords[0] : null;
        const borders = Array.isArray(entry.borders) ? entry.borders : [];
        const rawArea = typeof entry.area === "number" ? entry.area : null;
        const area = rawArea && rawArea > 0 ? rawArea : null;
        const landlocked = !!entry.landlocked;
        const isIsland = borders.length === 0 && !landlocked;
        const flagSource =
          entry.flags?.svg ||
          entry.flags?.png ||
          entry.flag ||
          entry.flagPng ||
          entry.flagSvg ||
          null;

        return {
          name: countryName,
          cca3: entry.cca3 || entry.cca3Code || null,
          region: entry.region || "Other",
          subregion: entry.subregion || "Other",
          flagUrl: flagSource,
          landlocked,
          hasCoast: !landlocked,
          isIsland,
          bordersCount: borders.length,
          area,
          isTiny: area !== null && area < 1000,
          isMassive: area !== null && area > 1_000_000,
          latitude,
          northernHemisphere: latitude !== null ? latitude >= 0 : null,
          southernHemisphere: latitude !== null ? latitude < 0 : null,
          independent: entry.independent === true,
          unMember: entry.unMember === true,
          speaksEnglish: hasLanguage(languages, "english"),
          speaksSpanish: hasLanguage(languages, "spanish"),
          speaksFrench: hasLanguage(languages, "french"),
          speaksPortuguese: hasLanguage(languages, "portuguese"),
          speaksArabic: hasLanguage(languages, "arabic"),
          speaksRussian: hasLanguage(languages, "russian"),
          speaksChinese: hasLanguage(languages, "chinese"),
          speaksGerman: hasLanguage(languages, "german"),
        };
      };

      const slugify = (value) =>
        value
          .toLowerCase()
          .replace(/[^a-z0-9]+/g, "-")
          .replace(/^-+|-+$/g, "");

      const buildQuestionBank = (dataset) => {
        const baseQuestions = [
          {
            id: "region-americas",
            text: "Is the country in the Americas?",
            predicate: (c) => c.region === "Americas",
          },
          {
            id: "region-europe",
            text: "Is it part of Europe?",
            predicate: (c) => c.region === "Europe",
          },
          {
            id: "region-asia",
            text: "Is it in Asia?",
            predicate: (c) => c.region === "Asia",
          },
          {
            id: "region-africa",
            text: "Is it located in Africa?",
            predicate: (c) => c.region === "Africa",
          },
          {
            id: "region-oceania",
            text: "Is it part of Oceania?",
            predicate: (c) => c.region === "Oceania",
          },
          {
            id: "region-antarctic",
            text: "Is it one of the Antarctic territories?",
            predicate: (c) => c.region === "Antarctic",
          },
          {
            id: "southern-hemisphere",
            text: "Is it primarily in the Southern Hemisphere?",
            predicate: (c) => c.southernHemisphere === true,
          },
          {
            id: "northern-hemisphere",
            text: "Is it mostly in the Northern Hemisphere?",
            predicate: (c) => c.northernHemisphere === true,
          },
          {
            id: "island",
            text: "Is it an island nation?",
            predicate: (c) => c.isIsland,
          },
          {
            id: "landlocked",
            text: "Is it completely landlocked?",
            predicate: (c) => c.landlocked,
          },
          {
            id: "coastline",
            text: "Does it have a coastline?",
            predicate: (c) => c.hasCoast,
          },
          {
            id: "tiny",
            text: "Is it a microstate under 1,000 km?",
            predicate: (c) => c.isTiny,
          },
          {
            id: "massive",
            text: "Does it span more than a million km?",
            predicate: (c) => c.isMassive,
          },
          {
            id: "independent",
            text: "Is it an independent country today?",
            predicate: (c) => c.independent,
          },
          {
            id: "un-member",
            text: "Is it a United Nations member state?",
            predicate: (c) => c.unMember,
          },
          {
            id: "borders-5",
            text: "Does it share borders with 5 or more countries?",
            predicate: (c) => c.bordersCount >= 5,
          },
          {
            id: "lang-english",
            text: "Is English widely spoken there?",
            predicate: (c) => c.speaksEnglish,
          },
          {
            id: "lang-spanish",
            text: "Is Spanish a major language?",
            predicate: (c) => c.speaksSpanish,
          },
          {
            id: "lang-french",
            text: "Is French commonly used nationwide?",
            predicate: (c) => c.speaksFrench,
          },
          {
            id: "lang-portuguese",
            text: "Is Portuguese widely spoken?",
            predicate: (c) => c.speaksPortuguese,
          },
          {
            id: "lang-arabic",
            text: "Is Arabic a primary language?",
            predicate: (c) => c.speaksArabic,
          },
          {
            id: "lang-russian",
            text: "Is Russian commonly spoken?",
            predicate: (c) => c.speaksRussian,
          },
          {
            id: "lang-chinese",
            text: "Is Chinese the dominant language?",
            predicate: (c) => c.speaksChinese,
          },
          {
            id: "lang-german",
            text: "Is German a national language?",
            predicate: (c) => c.speaksGerman,
          },
        ];

        const subregionCounts = dataset.reduce((acc, c) => {
          if (!c.subregion || c.subregion === "Other") {
            return acc;
          }
          acc.set(c.subregion, (acc.get(c.subregion) || 0) + 1);
          return acc;
        }, new Map());

        subregionCounts.forEach((count, subregion) => {
          if (count < 8) {
            return;
          }
          baseQuestions.push({
            id: `sub-${slugify(subregion)}`,
            text: `Is it in ${subregion}?`,
            predicate: (c) => c.subregion === subregion,
          });
        });

        return baseQuestions;
      };

      const countMatches = (items, predicate) => {
        let yesCount = 0;
        for (const item of items) {
          if (predicate(item)) {
            yesCount += 1;
          }
        }
        return yesCount;
      };

      const defaultResultCopy = {
        text: "Gathering signals from your answers",
        hint: 'Tap "Yes" to lock it in or "No" to keep narrowing down.',
        trait: "Each reply sharpens the silhouette of your secret nation.",
      };

      const applyFlagBackdrop = (url, countryName = "") => {
        if (!resultFlagEl || !guessBox) {
          return;
        }
        if (url) {
          const safeUrl = encodeURI(url);
          resultFlagEl.style.backgroundImage = `url("${safeUrl}")`;
          guessBox.classList.add("has-flag");

          if (resultFlagImgEl) {
            resultFlagImgEl.src = safeUrl;
            resultFlagImgEl.alt = countryName
              ? `Flag of ${countryName}`
              : "Country flag";
          }
        } else {
          resultFlagEl.style.backgroundImage = "";
          guessBox.classList.remove("has-flag");

          if (resultFlagImgEl) {
            resultFlagImgEl.removeAttribute("src");
            resultFlagImgEl.alt = "";
          }
        }
      };

      const FLAG_CACHE_KEY = "geoZiniFlagMapV1";

      const getCachedFlagMap = () => {
        try {
          const raw = localStorage.getItem(FLAG_CACHE_KEY);
          if (!raw) {
            return {};
          }
          const parsed = JSON.parse(raw);
          if (parsed && typeof parsed === "object") {
            return parsed;
          }
        } catch {
          // ignore cache failures
        }
        return {};
      };

      const setCachedFlagMap = (map) => {
        try {
          localStorage.setItem(FLAG_CACHE_KEY, JSON.stringify(map));
        } catch {
          // ignore cache failures
        }
      };

      const hydrateFlags = async (normalizedCountries) => {
        if (
          !Array.isArray(normalizedCountries) ||
          !normalizedCountries.length
        ) {
          return;
        }

        const cached = getCachedFlagMap();
        let didApplyCache = false;

        for (const country of normalizedCountries) {
          if (!country || country.flagUrl) {
            continue;
          }
          const code = (country.cca3 || "").toUpperCase();
          const cachedUrl = code ? cached[code] : null;
          if (cachedUrl) {
            country.flagUrl = cachedUrl;
            didApplyCache = true;
          }
        }

        const stillMissing = normalizedCountries.some(
          (c) => c && !c.flagUrl && c.cca3
        );
        if (!stillMissing) {
          if (didApplyCache) {
            // keep cache as-is
          }
          return;
        }

        try {
          const response = await fetch(
            "https://restcountries.com/v3.1/all?fields=cca3,flags,unMember",
            { cache: "no-store" }
          );
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }
          const payload = await response.json();
          if (!Array.isArray(payload)) {
            return;
          }

          const nextMap = { ...cached };
          for (const entry of payload) {
            if (!entry || entry.unMember !== true) {
              continue;
            }
            const code = (entry.cca3 || "").toUpperCase();
            const url =
              entry.flags?.svg ||
              entry.flags?.png ||
              entry.flagSvg ||
              entry.flagPng ||
              null;
            if (code && url) {
              nextMap[code] = url;
            }
          }

          for (const country of normalizedCountries) {
            if (!country || country.flagUrl) {
              continue;
            }
            const code = (country.cca3 || "").toUpperCase();
            if (code && nextMap[code]) {
              country.flagUrl = nextMap[code];
            }
          }

          setCachedFlagMap(nextMap);
        } catch {
          // If flags can't be fetched (offline), we keep whatever we have.
        }
      };

      const computeConfidenceScore = (poolSize) => {
        if (!countries.length) {
          return 0.35;
        }
        if (!poolSize || poolSize <= 0) {
          return 0.35;
        }
        const rarity = Math.min(1, 1 / poolSize);
        const progress = Math.min(
          1,
          asked.size / Math.max(questions.length, 1)
        );
        return Math.max(0.35, Math.min(1, rarity + progress * 0.2));
      };

      const updateConfidence = (poolSize) => {
        if (!resultConfidenceValueEl || !resultConfidenceFillEl) {
          return;
        }
        if (poolSize === null) {
          resultConfidenceValueEl.textContent = "";
          resultConfidenceFillEl.style.width = "35%";
          return;
        }
        const score = Math.round(computeConfidenceScore(poolSize) * 100);
        resultConfidenceValueEl.textContent = `${score}%`;
        resultConfidenceFillEl.style.width = `${score}%`;
      };

      const buildTraitDetails = (country) => {
        const tags = [];
        if (country.isIsland) {
          tags.push("Island energy");
        } else if (country.landlocked) {
          tags.push("Landlocked heartland");
        }
        if (country.isTiny) {
          tags.push("Microstate scale");
        }
        if (country.isMassive) {
          tags.push("Continental giant");
        }
        if (country.southernHemisphere) {
          tags.push("Southern hemisphere");
        } else if (country.northernHemisphere) {
          tags.push("Northern hemisphere");
        }
        if (country.speaksSpanish) {
          tags.push("Spanish speaking");
        } else if (country.speaksEnglish) {
          tags.push("English ready");
        } else if (country.speaksFrench) {
          tags.push("Francophone flair");
        }
        if (country.bordersCount >= 5) {
          tags.push("Border crossroads");
        }

        const summaryTags = tags.slice(0, 3).join("  ");
        const summary = summaryTags
          ? `Geo-Zini feels ${
              country.name
            } radiating ${summaryTags.toLowerCase()}.`
          : `${country.name} refuses to fit neat labels  and that makes the deduction even sweeter.`;

        return {
          signature: tags[0] || "Unique outlier",
          summary,
        };
      };

      const resetResultPanel = () => {
        if (!guessBox) {
          return;
        }
        guessText.textContent = defaultResultCopy.text;
        guessHintEl.textContent = defaultResultCopy.hint;
        resultTraitEl.textContent = defaultResultCopy.trait;
        resultRegionEl.textContent = "";
        resultRealmEl.textContent = "";
        resultSignatureEl.textContent = "Awaiting clues";
        updateConfidence(null);
        applyFlagBackdrop(null);
      };

      const populateResultPanel = (country) => {
        if (!country || !guessBox) {
          return;
        }
        const traitDetails = buildTraitDetails(country);
        guessText.textContent = `I guess you're thinking of ${country.name}!`;
        guessHintEl.textContent = defaultResultCopy.hint;
        resultTraitEl.textContent = traitDetails.summary;
        resultSignatureEl.textContent = traitDetails.signature;
        resultRegionEl.textContent = country.region || "";
        resultRealmEl.textContent = country.subregion || "";
        applyFlagBackdrop(country.flagUrl, country.name);
        updateConfidence(remaining.length || 1);
        guessBox.classList.add("active");
      };

      const showStumpedResult = () => {
        if (!guessBox) {
          return;
        }
        guessText.textContent =
          "I'm stumped. That combination doesn't match any country I know.";
        guessHintEl.textContent = "Restart to challenge me with a new mystery.";
        resultTraitEl.textContent =
          "Your clues broke my current dataset. Refresh or restart to teach me more.";
        resultSignatureEl.textContent = "Data gap";
        resultRegionEl.textContent = "";
        resultRealmEl.textContent = "";
        applyFlagBackdrop(null);
        updateConfidence(null);
        guessBox.classList.add("active");
      };

      const setControlsEnabled = (enabled) => {
        [yesBtn, noBtn].forEach((btn) => {
          btn.disabled = !enabled;
          btn.setAttribute("aria-disabled", String(!enabled));
        });
        restartBtn.disabled = !countries.length;
      };

      const setBusy = (busy) => {
        const value = busy ? "true" : "false";
        stageEl?.setAttribute("aria-busy", value);
        mainEl?.setAttribute("aria-busy", value);
      };

      const addHistory = (text, answer) => {
        if (!historyList) {
          return;
        }
        const item = document.createElement("li");
        item.className = "history-item";
        item.setAttribute("data-answer", answer ? "yes" : "no");

        const questionEl = document.createElement("p");
        questionEl.className = "history-question";
        questionEl.textContent = text;

        const answerEl = document.createElement("span");
        answerEl.className = `history-answer ${answer ? "yes" : "no"}`;
        answerEl.textContent = answer ? "Yes" : "No";

        item.append(questionEl, answerEl);
        historyList.appendChild(item);
        historyList.scrollTop = historyList.scrollHeight;
      };

      const updateStatus = () => {
        if (!countries.length) {
          statusEl.textContent = "Loading full country dataset...";
          return;
        }
        statusEl.textContent = `Remaining possibilities: ${remaining.length} / ${countries.length}`;
      };

      const setQuestion = (question) => {
        currentQuestion = question;
        questionEl.textContent = question
          ? question.text
          : "I'm out of questions!";
        if (!question) {
          speakGuide("stumped");
        } else if (question.isGuess) {
          speakGuide("guess");
        } else {
          speakGuide("thinking");
        }
      };

      const pickNextQuestion = () => {
        if (!questions.length) {
          return null;
        }

        const candidates = questions
          .filter((q) => !asked.has(q.id))
          .map((q) => {
            const yesCount = countMatches(remaining, q.predicate);
            const noCount = remaining.length - yesCount;
            return {
              q,
              yesCount,
              noCount,
              score: Math.abs(yesCount - noCount),
            };
          })
          .filter(({ yesCount, noCount }) => yesCount > 0 && noCount > 0)
          .sort((a, b) => a.score - b.score);

        if (candidates.length) {
          return candidates[0].q;
        }

        if (remaining.length) {
          const fallback = remaining[0];
          return {
            id: `guess-${fallback.name}`,
            text: `Is it ${fallback.name}?`,
            predicate: (c) => c.name === fallback.name,
            isGuess: true,
          };
        }

        return null;
      };

      const showGuess = (country) => {
        populateResultPanel(country);
        finished = true;
        setControlsEnabled(false);
        questionEl.textContent = "Want to play again? Hit restart.";
        speakGuide("success");
      };

      const handleAnswer = (answerIsYes) => {
        if (!currentQuestion || finished) {
          startRound();
          return;
        }

        remaining = remaining.filter(
          (c) => currentQuestion.predicate(c) === answerIsYes
        );
        asked.add(currentQuestion.id);
        addHistory(currentQuestion.text, answerIsYes);
        updateStatus();

        if (remaining.length === 0) {
          showStumpedResult();
          finished = true;
          setControlsEnabled(false);
          questionEl.textContent =
            "Teach me more by refreshing my data, but for now let's restart.";
          speakGuide("stumped");
          return;
        }

        if (remaining.length === 1) {
          showGuess(remaining[0]);
          return;
        }

        currentQuestion = pickNextQuestion();
        setQuestion(currentQuestion);
      };

      const resetGame = () => {
        if (!countries.length || !questions.length) {
          speakGuide("loading");
          return;
        }

        remaining = [...countries];
        asked = new Set();
        finished = false;
        historyList.innerHTML = "";
        guessBox.classList.remove("active");
        resetResultPanel();
        setControlsEnabled(true);
        updateStatus();
        currentQuestion = pickNextQuestion();
        setQuestion(currentQuestion);
      };

      const startRound = () => {
        if (!questions.length || finished) {
          return;
        }
        if (!currentQuestion) {
          currentQuestion = pickNextQuestion();
          setQuestion(currentQuestion);
        }
      };

      yesBtn.addEventListener("click", () => handleAnswer(true));
      noBtn.addEventListener("click", () => handleAnswer(false));
      restartBtn.addEventListener("click", resetGame);

      setControlsEnabled(false);
      questionEl.textContent = "Loading the complete list of countries...";
      updateStatus();
      speakGuide("loading");

      const fetchDataset = async () => {
        const failures = [];
        for (const source of DATA_SOURCES) {
          try {
            const response = await fetch(source, { cache: "no-store" });
            if (!response.ok) {
              throw new Error(`HTTP ${response.status}`);
            }
            const payload = await response.json();
            if (Array.isArray(payload)) {
              return payload;
            }
            if (payload?.data && Array.isArray(payload.data)) {
              return payload.data;
            }
            throw new Error("Unexpected dataset format");
          } catch (err) {
            failures.push(`${source} -> ${err.message}`);
          }
        }
        throw new Error(
          `Unable to load country data. Tried: ${failures.join(" | ")}`
        );
      };

      const bootstrap = async () => {
        try {
          setBusy(true);
          const raw = await fetchDataset();
          countries = raw
            .map((entry) => normalizeCountry(entry))
            .filter(Boolean);
          if (!countries.length) {
            throw new Error("Dataset returned zero UN members");
          }

          await hydrateFlags(countries);

          questions = buildQuestionBank(countries);
          setControlsEnabled(true);
          resetGame();
        } catch (error) {
          statusEl.textContent = "Couldn't load the dataset.";
          questionEl.textContent = `${error.message}. Please refresh to try again.`;
          setControlsEnabled(false);
          speakGuide("stumped");
        } finally {
          setBusy(false);
        }
      };

      bootstrap();
    </script>
  </body>
</html>
